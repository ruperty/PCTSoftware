# -*- coding: utf-8 -*-
"""
Created on Tue Nov 24 12:23:58 2020

@author: rupert
"""

from epct.configs import DynamicConfiguration
from pct.environments import CartPoleV1
from pct.architectures import DynamicArchitecture

verbose=False
seed=29

runs=500
inputs=[1,0,3,2]
error_collector_type ='InputsError'
error_response_type = 'RootMeanSquareError'

env = CartPoleV1(name='CartpoleV1', render=True, early_termination=False)


config_test=6

move={'ICV':[-0.7,0.6],'ICP':[-0.3,0.4],'IPV':[0.18,0.2],'IPA':[0.7,0],
          'CartpoleV1':[-.5,-0.25], 'Action1ws':[-0.5,0]}

move={}

if config_test==1: 
    raw=[[[[7.658684867984963], [1.1130313365600184], [7.751568016823082], [5.629262405947559]], 
          [-2.9429894771355043], [0], [[1]]]]

if config_test==2: 
    raw = [[[[0, 0], [0, 0], [1, 0], [1, 1]], [-5.966679728652489, -8.678124421675038], [[0.9125917665595157], [3.0375866845981903]], [[1, 0]]], 
           [[[1], [0]], [0.2674950562136722], [0]]]

if config_test==3: 
    raw = [[[[1], [0], [1], [1]], [-1.1076644566332312], [0], [[1]]]]
    
    
if config_test==4:     
    raw = [[[[0, 1], [0, 0], [0, 1], [0, 1]], [11.127470309768777, 2.643395694270144], [[0.6621424403472853], [-6.7465162211745096]], [[1, 0]]], 
           [[[1], [1]], [-1.871728601816212], [0]]]
    
if config_test==5:         
    raw = [[[[5.446728677674608], [1.3184995951108966], [7.596656211894674], [5.455028778661251]], [-2.718854834402715], [0], [[1]]]]


if config_test==6:         
    raw = [[[[-2.0251232922005165, 0.7038674862577321, 3.268984915962274, -4.219592868128285, -4.630294086040458, 7.665424449499381, -4.2343500798355205, -7.861602808630485], [-3.423248255140082, 0.5154950334096352, 7.061369504856814, -3.482161487335869, -5.429532041155394, 8.251039891340456, 4.320494466931445, 0.5152671336431137], [-1.0797583552615122, 5.481754964942575, 3.6050488611253786, 5.337099769892589, -6.405779386299008, -4.019821958989415, 2.350602977089561, 2.827642696170656], [5.968411820360065, 9.306301376903473, 9.529084226932124, -8.281612732858857, -4.434466287633235, 2.07633424873989, 4.4300420594991, -5.055398294226082]], [6.022325331281984, 2.5075825409478494, -0.49529996777085655, 4.502551993718263, 9.984890215270521, 2.510744638549108, 0.5920202606330665, -1.8637458368732074], [[9.196565601702396, 2.925773715828353, 2.7958001558489958, 2.3660498932035066, 7.218995851591193, 2.4804768257865932], [-4.57873259673114, -7.11664177999568, 7.374937179637886, 2.172659132295898, -0.4354803466741115, 0.5959123115337497], [4.65063730764361, 1.530533859060216, 6.824495343559793, 8.747363005740512, 9.782173822156578, 9.071288681528483], [-8.097022702005995, -4.512062447807436, 7.4419574291752975, 7.12581627604121, 1.6915832719438044, -2.1822749421425596], [4.737063474245748, 7.615788008083163, -2.3990895218600627, 0.8709600876200851, 6.91477507570659, -3.3573643239646493], [4.322178606306654, -5.913179336203822, 0.7028261515455316, 5.550089254230255, 9.279014119331485, -3.3542397208201007], [5.259752333381733, 4.992629976986045, 1.2608973791091287, -6.944530675937076, 7.0886773143712505, -4.213717066516214], [-7.380396236929851, -7.84991581709352, -6.557415688285822, -9.452078366402587, -9.185746829693496, -0.665592896675484]], [[0, 0, 1, 1, 0, 0, 1, 1]]], [[[-9.114686224224258, 3.5297254227316, 9.48376323058155, 3.977247753086906, 9.3644107063555, 5.403360607184823], [-1.0430811062414458, 7.07870299573381, -8.678696378005004, -6.389103572828185, 6.382702108715172, 4.843077748681601], [9.437878873728554, -6.869935846536416, 9.716070782208053, 5.508507828736274, -7.24892061129674, -2.1466356780742117], [8.170773131244651, -7.7594001875619405, 8.882134204425203, 8.8665361112446, 6.2689748226001605, -6.585197828737252], [-0.8450051361644775, -4.704767764664192, 3.7904594771887874, -2.9894564776947434, 2.5359004089612682, -9.426734584015243], [-9.665764890393053, -4.6903528140204624, -9.370369045843855, 7.928772104605789, -8.25464062063773, -2.909487435257097], [4.88577136551399, -0.16909586258150533, -9.290615142327672, -1.213822642782743, 4.7174939401938225, -9.867641870088173], [3.788144980172749, 0.5455023152888767, -1.6551755259540515, -8.460943551388645, -6.972626769671886, 3.9798927391046024]], [0.11547735545312254, -7.4991247146224485, -4.137867225081154, 2.7044120035332244, 6.63437184182007, 8.177752050996865], [[0.7725909325494239], [-6.0924382301289075], [-9.88455931406288], [-8.57891477306884], [5.453343536939956], [0.7209635223573407]]], [[[0.09079841558541477], [2.407058069655019], [-12.118197378575084], [-6.177959014360967], [-9.414650902468308], [-0.842053947999764]], [14.432950769045933], [0]]]

#  InErr-Rms-AllFlts ga-000.111-s029-1x1-3344-4092379090950878390.properties
if config_test==7: 
    raw =  [[[[-6.4753801856699145], [1.704790447961068], [-6.972149076553585], [-3.347244035179891]], [3.0534956448437303], [0], [[6.013747338705366]]]]
if config_test==8: 
    raw =  [[[[-6.4753801856699145], [1.704790447961068], [-6.972149076553585], [-3.347244035179891]], [9.06], [0], [[1]]]]

# InErr-Rms-AllFlts ga-000.137-s050-2x6-3344--77869468031791816.properties
if config_test==9:   
    seed = 50
    raw = [[[[6.312682245293111, 10.418739668360049, -1.2948424360304434, 10.795806042003102, 6.49764339092796, 5.7653676726978125], [-3.70895546330773, 4.43585353759563, -5.5708881627237, -4.694787692318501, 4.335649862294428, -10.535440679168655], [-2.3189504086343025, -0.3001406297513484, -7.109338217211083, -15.52585083089378, -1.6631047005066362, -7.703778374626236], [-3.2549428034034316, 1.9287324855264256, 2.487991067175934, -1.1108284626035472, -12.734745896226428, -0.7402172886280906]], [2.4366996924916275, 5.447571530703675, -6.153390504013217, 3.1011865576093633, -1.4101617716265975, -4.943465328725763], [[-12.088845004076363], [-4.68514483063969], [-3.8013527800194056], [2.8699946938378567], [-6.411591801318743], [-0.6498194534953124]], [[-5.648233101363473, 8.504012052146916, -3.5569844638118235, 17.37553314461887, 7.5553395244107975, 9.66582007157292]]], [[[5.535288118413739], [9.802401840052386], [11.760508705761566], [-7.777564939701475], [0.7145158764002095], [-0.7466157696829137]], [-2.3946441579825657], [0]]]
    
    


    
#    file = drive + os.sep +'tmp'+ os.sep+ 'cartpole-from-prop-run.png'

inputs_names=['ICV', 'ICP', 'IPV', 'IPA']

score, last, hpct = DynamicArchitecture.run_raw(raw=raw, move=move, env=env, runs=runs, inputs=inputs, 
            inputs_names=inputs_names, summary=False, verbose=verbose, seed=seed, suffixes=True,
            error_collector_type=error_collector_type, error_response_type=error_response_type, draw=True)
print('score', score)
print('last step', last)

    




env.close()

    

