

from pct.hierarchy import PCTHierarchy
from pct.webots import WebotsHelper

class HPCTHelper(object):
    def __init__(self, config_num=None, mode = None):
        seed=1
        if config_num==1:
            config = {'type': 'Individual', 'name': 'pcthierarchy', 'pre': {'pre0': {'type': 'Bridge', 'name': 'Bridge', 'value': [-0.0, 0.0, -0.0, -0.0, 0.0, -0.0], 'links': {0: 'Action1', 1: 'Action2', 2: 'Action3', 3: 'Action4', 4: 'Action5', 5: 'Action6'}, 'env_name': 'Bridge', 'performance': 2.149, 'done': True}, 'pre1': {'type': 'IndexedParameter', 'name': 'LHipPitch', 'value': -0.0, 'links': {0: 'Bridge'}, 'index': 0}, 'pre2': {'type': 'IndexedParameter', 'name': 'LKneePitch', 'value': 0.0, 'links': {0: 'Bridge'}, 'index': 1}, 'pre3': {'type': 'IndexedParameter', 'name': 'LAnklePitch', 'value': -0.0, 'links': {0: 'Bridge'}, 'index': 2}, 'pre4': {'type': 'IndexedParameter', 'name': 'RHipPitch', 'value': -0.0, 'links': {0: 'Bridge'}, 'index': 3}, 'pre5': {'type': 'IndexedParameter', 'name': 'RKneePitch', 'value': 0.0, 'links': {0: 'Bridge'}, 'index': 4}, 'pre6': {'type': 'IndexedParameter', 'name': 'RAnklePitch', 'value': -0.0, 'links': {0: 'Bridge'}, 'index': 5}}, 'levels': {'level0': {'level': 0, 'nodes': {'col0': {'col': 0, 'node': {'type': 'PCTNode', 'name': 'L0C0', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL0C0', 'value': 0.0, 'links': {0: 'OL1C0', 1: 'OL1C1'}, 'weights': [0.3966908273483479, -0.14499343542419654]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL0C0', 'value': 0.0, 'links': {0: 'LHipPitch', 1: 'LKneePitch', 2: 'LAnklePitch', 3: 'RHipPitch', 4: 'RKneePitch', 5: 'RAnklePitch'}, 'weights': [0, 0, 0, 0, 1, 0]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL0C0', 'value': 0.0, 'links': {0: 'RL0C0', 1: 'PL0C0'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL0C0', 'value': -0.0, 'links': {0: 'CL0C0'}, 'gain': -0.2469704698731962}}}}, 'col1': {'col': 1, 'node': {'type': 'PCTNode', 'name': 'L0C1', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL0C1', 'value': -0.0, 'links': {0: 'OL1C0', 1: 'OL1C1'}, 'weights': [-0.4959794866933991, -0.7366519577999016]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL0C1', 'value': -0.0, 'links': {0: 'LHipPitch', 1: 'LKneePitch', 2: 'LAnklePitch', 3: 'RHipPitch', 4: 'RKneePitch', 5: 'RAnklePitch'}, 'weights': [0, 1, 0, 0, 0, 1]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL0C1', 'value': -0.0, 'links': {0: 'RL0C1', 1: 'PL0C1'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL0C1', 'value': -0.0, 'links': {0: 'CL0C1'}, 'gain': 0.453137041069354}}}}, 'col2': {'col': 2, 'node': {'type': 'PCTNode', 'name': 'L0C2', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL0C2', 'value': 0.0, 'links': {0: 'OL1C0', 1: 'OL1C1'}, 'weights': [0.19376194256004797, -0.4809641967711172]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL0C2', 'value': -0.0, 'links': {0: 'LHipPitch', 1: 'LKneePitch', 2: 'LAnklePitch', 3: 'RHipPitch', 4: 'RKneePitch', 5: 'RAnklePitch'}, 'weights': [1, 1, 0, 1, 1, 0]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL0C2', 'value': 0.0, 'links': {0: 'RL0C2', 1: 'PL0C2'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL0C2', 'value': -0.0, 'links': {0: 'CL0C2'}, 'gain': -0.22521351147985763}}}}, 'col3': {'col': 3, 'node': {'type': 'PCTNode', 'name': 'L0C3', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL0C3', 'value': -0.0, 'links': {0: 'OL1C0', 1: 'OL1C1'}, 'weights': [-0.5513824762645159, -0.833993025497277]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL0C3', 'value': -0.0, 'links': {0: 'LHipPitch', 1: 'LKneePitch', 2: 'LAnklePitch', 3: 'RHipPitch', 4: 'RKneePitch', 5: 'RAnklePitch'}, 'weights': [0, 1, 1, 1, 1, 1]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL0C3', 'value': -0.0, 'links': {0: 'RL0C3', 1: 'PL0C3'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL0C3', 'value': -0.0, 'links': {0: 'CL0C3'}, 'gain': 8.589637172171094e-05}}}}, 'col4': {'col': 4, 'node': {'type': 'PCTNode', 'name': 'L0C4', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL0C4', 'value': -0.0, 'links': {0: 'OL1C0', 1: 'OL1C1'}, 'weights': [-1.1227165885642547, 0.3002880992470238]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL0C4', 'value': -0.0, 'links': {0: 'LHipPitch', 1: 'LKneePitch', 2: 'LAnklePitch', 3: 'RHipPitch', 4: 'RKneePitch', 5: 'RAnklePitch'}, 'weights': [0, 0, 0, 1, 0, 0]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL0C4', 'value': -0.0, 'links': {0: 'RL0C4', 1: 'PL0C4'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL0C4', 'value': 0.0, 'links': {0: 'CL0C4'}, 'gain': -1.0546514050101221}}}}, 'col5': {'col': 5, 'node': {'type': 'PCTNode', 'name': 'L0C5', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL0C5', 'value': -0.0, 'links': {0: 'OL1C0', 1: 'OL1C1'}, 'weights': [-0.05203733904404315, -0.9069684322507601]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL0C5', 'value': 0.0, 'links': {0: 'LHipPitch', 1: 'LKneePitch', 2: 'LAnklePitch', 3: 'RHipPitch', 4: 'RKneePitch', 5: 'RAnklePitch'}, 'weights': [0, 1, 1, 0, 1, 0]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL0C5', 'value': -0.0, 'links': {0: 'RL0C5', 1: 'PL0C5'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL0C5', 'value': 0.0, 'links': {0: 'CL0C5'}, 'gain': -0.5870784571327743}}}}, 'col6': {'col': 6, 'node': {'type': 'PCTNode', 'name': 'L0C6', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL0C6', 'value': 0.0, 'links': {0: 'OL1C0', 1: 'OL1C1'}, 'weights': [0.7866844357696494, 0.3098529521714545]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL0C6', 'value': -0.0, 'links': {0: 'LHipPitch', 1: 'LKneePitch', 2: 'LAnklePitch', 3: 'RHipPitch', 4: 'RKneePitch', 5: 'RAnklePitch'}, 'weights': [1, 0, 0, 0, 1, 1]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL0C6', 'value': 0.0, 'links': {0: 'RL0C6', 1: 'PL0C6'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL0C6', 'value': -0.0, 'links': {0: 'CL0C6'}, 'gain': -0.4435370238596815}}}}}}, 'level1': {'level': 1, 'nodes': {'col0': {'col': 0, 'node': {'type': 'PCTNode', 'name': 'L1C0', 'refcoll': {'0': {'type': 'EAVariable', 'name': 'RL1C0', 'value': -0.7835225545944999, 'links': {}}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL1C0', 'value': -0.0, 'links': {0: 'PL0C0', 1: 'PL0C1', 2: 'PL0C2', 3: 'PL0C3', 4: 'PL0C4', 5: 'PL0C5', 6: 'PL0C6'}, 'weights': [1, 1, 1, 0, 0, 1, 1]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL1C0', 'value': -0.0, 'links': {0: 'RL1C0', 1: 'PL1C0'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL1C0', 'value': 0.0, 'links': {0: 'CL1C0'}, 'gain': -1.5664809090771636}}}}, 'col1': {'col': 1, 'node': {'type': 'PCTNode', 'name': 'L1C1', 'refcoll': {'0': {'type': 'EAVariable', 'name': 'RL1C1', 'value': -0.09078426133873872, 'links': {}}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL1C1', 'value': -0.0, 'links': {0: 'PL0C0', 1: 'PL0C1', 2: 'PL0C2', 3: 'PL0C3', 4: 'PL0C4', 5: 'PL0C5', 6: 'PL0C6'}, 'weights': [1, 1, 0, 0, 1, 1, 1]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL1C1', 'value': 0.0, 'links': {0: 'RL1C1', 1: 'PL1C1'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL1C1', 'value': -0.0, 'links': {0: 'CL1C1'}, 'gain': -0.25675287991511975}}}}}}}, 'post': {'post0': {'type': 'EAWeightedSum', 'name': 'Action1', 'value': -0.0, 'links': {0: 'OL0C0', 1: 'OL0C1', 2: 'OL0C2', 3: 'OL0C3', 4: 'OL0C4', 5: 'OL0C5', 6: 'OL0C6'}, 'weights': [0.18510388753825763, -0.49389894215208135, 0.32059392077337623, -0.10533078947782826, 0.07548626300726557, -0.37043634913137413, 0.396509376693697]}, 'post1': {'type': 'EAWeightedSum', 'name': 'Action2', 'value': -0.0, 'links': {0: 'OL0C0', 1: 'OL0C1', 2: 'OL0C2', 3: 'OL0C3', 4: 'OL0C4', 5: 'OL0C5', 6: 'OL0C6'}, 'weights': [-0.3239034730587389, 0.02599124375282727, 0.6492424802334008, -0.11715368518552849, -0.42008327417873426, -0.9418202494450519, -0.3862318164557935]}, 'post2': {'type': 'EAWeightedSum', 'name': 'Action3', 'value': 0.0, 'links': {0: 'OL0C0', 1: 'OL0C1', 2: 'OL0C2', 3: 'OL0C3', 4: 'OL0C4', 5: 'OL0C5', 6: 'OL0C6'}, 'weights': [0.07556341378349078, 1.0044295458328305, 0.14716512695950196, -1.1688367179023418, 0.6724539259159428, 0.10136513418761281, 0.9852590407435039]}, 'post3': {'type': 'EAWeightedSum', 'name': 'Action4', 'value': 0.0, 'links': {0: 'OL0C0', 1: 'OL0C1', 2: 'OL0C2', 3: 'OL0C3', 4: 'OL0C4', 5: 'OL0C5', 6: 'OL0C6'}, 'weights': [-0.16231614649505482, 0.5553604919750554, 0.3874508617159227, 0.7410367633561485, 1.0589899694324258, 1.847734511184337, 0.7476814117727033]}, 'post4': {'type': 'EAWeightedSum', 'name': 'Action5', 'value': -0.0, 'links': {0: 'OL0C0', 1: 'OL0C1', 2: 'OL0C2', 3: 'OL0C3', 4: 'OL0C4', 5: 'OL0C5', 6: 'OL0C6'}, 'weights': [-0.13294559509020212, -0.32395564949593686, 0.55724790000176, 1.2492311232408904, -0.6098764646184718, -0.9109171762828597, 1.168843771670811]}, 'post5': {'type': 'EAWeightedSum', 'name': 'Action6', 'value': -0.0, 'links': {0: 'OL0C0', 1: 'OL0C1', 2: 'OL0C2', 3: 'OL0C3', 4: 'OL0C4', 5: 'OL0C5', 6: 'OL0C6'}, 'weights': [0.4723809635755427, -0.9851636776923599, 0.7496632446166631, -0.9216107728136108, -1.1092427088964407, -0.5302694912593089, 0.09761569080690088]}}}
        if config_num==2:
            config = {'type': 'Individual', 'name': 'pcthierarchy', 'pre': {'pre0': {'type': 'Bridge', 'name': 'Bridge', 'value': [0.0, -0.0, -0.0, -0.0, 0.0, -0.0], 'links': {0: 'Action1', 1: 'Action2', 2: 'Action3', 3: 'Action4', 4: 'Action5', 5: 'Action6'}, 'env_name': 'Bridge', 'performance': 1.848, 'done': True}, 'pre1': {'type': 'IndexedParameter', 'name': 'LHipPitch', 'value': 0.0, 'links': {0: 'Bridge'}, 'index': 0}, 'pre2': {'type': 'IndexedParameter', 'name': 'LKneePitch', 'value': -0.0, 'links': {0: 'Bridge'}, 'index': 1}, 'pre3': {'type': 'IndexedParameter', 'name': 'LAnklePitch', 'value': -0.0, 'links': {0: 'Bridge'}, 'index': 2}, 'pre4': {'type': 'IndexedParameter', 'name': 'RHipPitch', 'value': -0.0, 'links': {0: 'Bridge'}, 'index': 3}, 'pre5': {'type': 'IndexedParameter', 'name': 'RKneePitch', 'value': 0.0, 'links': {0: 'Bridge'}, 'index': 4}, 'pre6': {'type': 'IndexedParameter', 'name': 'RAnklePitch', 'value': -0.0, 'links': {0: 'Bridge'}, 'index': 5}}, 'levels': {'level0': {'level': 0, 'nodes': {'col0': {'col': 0, 'node': {'type': 'PCTNode', 'name': 'L0C0', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL0C0', 'value': 0.0, 'links': {0: 'OL1C0', 1: 'OL1C1', 2: 'OL1C2', 3: 'OL1C3', 4: 'OL1C4', 5: 'OL1C5', 6: 'OL1C6'}, 'weights': [0.20820604049960487, 0.9984263305726154, 1.3823227063999424, 0.9531070767157506, 0.966524860690869, 0.0689252569757336, 0.5148099856878442]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL0C0', 'value': -0.0, 'links': {0: 'LHipPitch', 1: 'LKneePitch', 2: 'LAnklePitch', 3: 'RHipPitch', 4: 'RKneePitch', 5: 'RAnklePitch'}, 'weights': [0, 1, 1, 0, 0, 0]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL0C0', 'value': 0.0, 'links': {0: 'RL0C0', 1: 'PL0C0'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL0C0', 'value': -0.0, 'links': {0: 'CL0C0'}, 'gain': -0.7517777109764017}}}}, 'col1': {'col': 1, 'node': {'type': 'PCTNode', 'name': 'L0C1', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL0C1', 'value': 0.0, 'links': {0: 'OL1C0', 1: 'OL1C1', 2: 'OL1C2', 3: 'OL1C3', 4: 'OL1C4', 5: 'OL1C5', 6: 'OL1C6'}, 'weights': [-0.5861427860245194, 1.1188090683325902, 0.3890505212490686, 1.1340285778115617, 0.1058119078888794, -0.6986423938632139, 0.6829543604352412]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL0C1', 'value': -0.0, 'links': {0: 'LHipPitch', 1: 'LKneePitch', 2: 'LAnklePitch', 3: 'RHipPitch', 4: 'RKneePitch', 5: 'RAnklePitch'}, 'weights': [1, 1, 1, 1, 0, 0]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL0C1', 'value': 0.0, 'links': {0: 'RL0C1', 1: 'PL0C1'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL0C1', 'value': 0.0, 'links': {0: 'CL0C1'}, 'gain': 0.6368389490365074}}}}}}, 'level1': {'level': 1, 'nodes': {'col0': {'col': 0, 'node': {'type': 'PCTNode', 'name': 'L1C0', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL1C0', 'value': -0.0, 'links': {0: 'OL2C0', 1: 'OL2C1', 2: 'OL2C2', 3: 'OL2C3', 4: 'OL2C4', 5: 'OL2C5', 6: 'OL2C6', 7: 'OL2C7'}, 'weights': [1.5009771018483316, -0.22245804320240736, -1.1346095147033268, -0.03866931797435741, -0.5426796822090308, -0.8152339156820424, 1.1997110487298488, 0.49204021036688894]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL1C0', 'value': -0.0, 'links': {0: 'PL0C0', 1: 'PL0C1'}, 'weights': [1, 0]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL1C0', 'value': -0.0, 'links': {0: 'RL1C0', 1: 'PL1C0'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL1C0', 'value': -0.0, 'links': {0: 'CL1C0'}, 'gain': 1.8976883422261428}}}}, 'col1': {'col': 1, 'node': {'type': 'PCTNode', 'name': 'L1C1', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL1C1', 'value': 0.0, 'links': {0: 'OL2C0', 1: 'OL2C1', 2: 'OL2C2', 3: 'OL2C3', 4: 'OL2C4', 5: 'OL2C5', 6: 'OL2C6', 7: 'OL2C7'}, 'weights': [-0.5645681623640446, 1.6401273275727464, 1.1692960805923525, 0.7012800134741064, -0.02253295724814383, 0.7167430135655495, 0.2282611396327611, -0.7257351467032507]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL1C1', 'value': -0.0, 'links': {0: 'PL0C0', 1: 'PL0C1'}, 'weights': [1, 0]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL1C1', 'value': 0.0, 'links': {0: 'RL1C1', 1: 'PL1C1'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL1C1', 'value': 0.0, 'links': {0: 'CL1C1'}, 'gain': 0.10018184802700963}}}}, 'col2': {'col': 2, 'node': {'type': 'PCTNode', 'name': 'L1C2', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL1C2', 'value': 0.0, 'links': {0: 'OL2C0', 1: 'OL2C1', 2: 'OL2C2', 3: 'OL2C3', 4: 'OL2C4', 5: 'OL2C5', 6: 'OL2C6', 7: 'OL2C7'}, 'weights': [-0.8440676145762832, 0.9815357140690819, 1.0713228126972756, 0.5311241271023894, -0.03858923083201787, -0.44189258252112357, -0.12090920331418797, -1.028268364100727]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL1C2', 'value': -0.0, 'links': {0: 'PL0C0', 1: 'PL0C1'}, 'weights': [0, 1]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL1C2', 'value': 0.0, 'links': {0: 'RL1C2', 1: 'PL1C2'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL1C2', 'value': -0.0, 'links': {0: 'CL1C2'}, 'gain': -0.3311350660665583}}}}, 'col3': {'col': 3, 'node': {'type': 'PCTNode', 'name': 'L1C3', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL1C3', 'value': -0.0, 'links': {0: 'OL2C0', 1: 'OL2C1', 2: 'OL2C2', 3: 'OL2C3', 4: 'OL2C4', 5: 'OL2C5', 6: 'OL2C6', 7: 'OL2C7'}, 'weights': [0.20873162220350625, -0.4573261860478348, -0.8748710084356067, 1.2666644819125907, 1.3116109206169484, -0.3857982971026478, 0.5614119847694959, -0.22289894697037743]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL1C3', 'value': -0.0, 'links': {0: 'PL0C0', 1: 'PL0C1'}, 'weights': [0, 1]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL1C3', 'value': -0.0, 'links': {0: 'RL1C3', 1: 'PL1C3'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL1C3', 'value': -0.0, 'links': {0: 'CL1C3'}, 'gain': 0.6020010878962837}}}}, 'col4': {'col': 4, 'node': {'type': 'PCTNode', 'name': 'L1C4', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL1C4', 'value': 0.0, 'links': {0: 'OL2C0', 1: 'OL2C1', 2: 'OL2C2', 3: 'OL2C3', 4: 'OL2C4', 5: 'OL2C5', 6: 'OL2C6', 7: 'OL2C7'}, 'weights': [-0.4124626222018615, 1.0852985599902345, 0.8899589042563082, 0.45850147235284733, 0.7445549151495067, -1.018498359339487, 0.506141322972627, 1.0939666799394945]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL1C4', 'value': -0.0, 'links': {0: 'PL0C0', 1: 'PL0C1'}, 'weights': [0, 1]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL1C4', 'value': 0.0, 'links': {0: 'RL1C4', 1: 'PL1C4'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL1C4', 'value': 0.0, 'links': {0: 'CL1C4'}, 'gain': 0.5899475432395898}}}}, 'col5': {'col': 5, 'node': {'type': 'PCTNode', 'name': 'L1C5', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL1C5', 'value': 0.0, 'links': {0: 'OL2C0', 1: 'OL2C1', 2: 'OL2C2', 3: 'OL2C3', 4: 'OL2C4', 5: 'OL2C5', 6: 'OL2C6', 7: 'OL2C7'}, 'weights': [0.05047273429469695, 0.5729187702830871, 0.7394513965015472, 1.0387181660342812, 0.429148538193874, -0.04374295360443203, 0.25265918858081404, -0.5039314986278215]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL1C5', 'value': -0.0, 'links': {0: 'PL0C0', 1: 'PL0C1'}, 'weights': [1, 0]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL1C5', 'value': 0.0, 'links': {0: 'RL1C5', 1: 'PL1C5'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL1C5', 'value': 0.0, 'links': {0: 'CL1C5'}, 'gain': 0.517673291108174}}}}, 'col6': {'col': 6, 'node': {'type': 'PCTNode', 'name': 'L1C6', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL1C6', 'value': -0.0, 'links': {0: 'OL2C0', 1: 'OL2C1', 2: 'OL2C2', 3: 'OL2C3', 4: 'OL2C4', 5: 'OL2C5', 6: 'OL2C6', 7: 'OL2C7'}, 'weights': [-0.06809060706877468, -0.6124435435069069, -0.31523516961983034, 0.3096645024855691, -0.733288144919773, -0.1984011751723701, 1.539227298830297, -0.5402955344637485]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL1C6', 'value': -0.0, 'links': {0: 'PL0C0', 1: 'PL0C1'}, 'weights': [0, 1]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL1C6', 'value': -0.0, 'links': {0: 'RL1C6', 1: 'PL1C6'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL1C6', 'value': -0.0, 'links': {0: 'CL1C6'}, 'gain': 0.22865823288561804}}}}}}, 'level2': {'level': 2, 'nodes': {'col0': {'col': 0, 'node': {'type': 'PCTNode', 'name': 'L2C0', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL2C0', 'value': -0.0, 'links': {0: 'OL3C0', 1: 'OL3C1'}, 'weights': [0.724487651541055, -0.44313416447787435]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL2C0', 'value': -0.0, 'links': {0: 'PL1C0', 1: 'PL1C1', 2: 'PL1C2', 3: 'PL1C3', 4: 'PL1C4', 5: 'PL1C5', 6: 'PL1C6'}, 'weights': [1, 0, 1, 1, 0, 1, 1]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL2C0', 'value': -0.0, 'links': {0: 'RL2C0', 1: 'PL2C0'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL2C0', 'value': 0.0, 'links': {0: 'CL2C0'}, 'gain': -0.4670219113079914}}}}, 'col1': {'col': 1, 'node': {'type': 'PCTNode', 'name': 'L2C1', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL2C1', 'value': 0.0, 'links': {0: 'OL3C0', 1: 'OL3C1'}, 'weights': [1.2953567987873535, 1.2073063135640365]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL2C1', 'value': -0.0, 'links': {0: 'PL1C0', 1: 'PL1C1', 2: 'PL1C2', 3: 'PL1C3', 4: 'PL1C4', 5: 'PL1C5', 6: 'PL1C6'}, 'weights': [0, 1, 0, 0, 1, 1, 1]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL2C1', 'value': 0.0, 'links': {0: 'RL2C1', 1: 'PL2C1'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL2C1', 'value': 0.0, 'links': {0: 'CL2C1'}, 'gain': 0.9508570670790675}}}}, 'col2': {'col': 2, 'node': {'type': 'PCTNode', 'name': 'L2C2', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL2C2', 'value': 0.0, 'links': {0: 'OL3C0', 1: 'OL3C1'}, 'weights': [-0.3010605023203859, 0.33091968660141924]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL2C2', 'value': -0.0, 'links': {0: 'PL1C0', 1: 'PL1C1', 2: 'PL1C2', 3: 'PL1C3', 4: 'PL1C4', 5: 'PL1C5', 6: 'PL1C6'}, 'weights': [0, 0, 1, 1, 1, 0, 0]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL2C2', 'value': 0.0, 'links': {0: 'RL2C2', 1: 'PL2C2'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL2C2', 'value': 0.0, 'links': {0: 'CL2C2'}, 'gain': 1.5628003762434235}}}}, 'col3': {'col': 3, 'node': {'type': 'PCTNode', 'name': 'L2C3', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL2C3', 'value': -0.0, 'links': {0: 'OL3C0', 1: 'OL3C1'}, 'weights': [-0.049600061714526494, -0.2407380233237948]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL2C3', 'value': -0.0, 'links': {0: 'PL1C0', 1: 'PL1C1', 2: 'PL1C2', 3: 'PL1C3', 4: 'PL1C4', 5: 'PL1C5', 6: 'PL1C6'}, 'weights': [1, 0, 0, 1, 1, 1, 1]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL2C3', 'value': 0.0, 'links': {0: 'RL2C3', 1: 'PL2C3'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL2C3', 'value': 0.0, 'links': {0: 'CL2C3'}, 'gain': 0.9014563469716392}}}}, 'col4': {'col': 4, 'node': {'type': 'PCTNode', 'name': 'L2C4', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL2C4', 'value': -0.0, 'links': {0: 'OL3C0', 1: 'OL3C1'}, 'weights': [-0.03399076130601958, -0.2558604739342858]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL2C4', 'value': -0.0, 'links': {0: 'PL1C0', 1: 'PL1C1', 2: 'PL1C2', 3: 'PL1C3', 4: 'PL1C4', 5: 'PL1C5', 6: 'PL1C6'}, 'weights': [0, 0, 1, 0, 0, 1, 1]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL2C4', 'value': 0.0, 'links': {0: 'RL2C4', 1: 'PL2C4'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL2C4', 'value': 0.0, 'links': {0: 'CL2C4'}, 'gain': 0.09511016347751072}}}}, 'col5': {'col': 5, 'node': {'type': 'PCTNode', 'name': 'L2C5', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL2C5', 'value': -0.0, 'links': {0: 'OL3C0', 1: 'OL3C1'}, 'weights': [1.1433060882784887, 0.39517648421675483]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL2C5', 'value': -0.0, 'links': {0: 'PL1C0', 1: 'PL1C1', 2: 'PL1C2', 3: 'PL1C3', 4: 'PL1C4', 5: 'PL1C5', 6: 'PL1C6'}, 'weights': [1, 0, 0, 1, 1, 0, 0]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL2C5', 'value': -0.0, 'links': {0: 'RL2C5', 1: 'PL2C5'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL2C5', 'value': -0.0, 'links': {0: 'CL2C5'}, 'gain': 1.1667191790968252}}}}, 'col6': {'col': 6, 'node': {'type': 'PCTNode', 'name': 'L2C6', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL2C6', 'value': -0.0, 'links': {0: 'OL3C0', 1: 'OL3C1'}, 'weights': [-0.5365354458520144, -0.9497163080176407]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL2C6', 'value': -0.0, 'links': {0: 'PL1C0', 1: 'PL1C1', 2: 'PL1C2', 3: 'PL1C3', 4: 'PL1C4', 5: 'PL1C5', 6: 'PL1C6'}, 'weights': [0, 0, 1, 1, 0, 1, 0]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL2C6', 'value': 0.0, 'links': {0: 'RL2C6', 1: 'PL2C6'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL2C6', 'value': -0.0, 'links': {0: 'CL2C6'}, 'gain': -0.24208397220993733}}}}, 'col7': {'col': 7, 'node': {'type': 'PCTNode', 'name': 'L2C7', 'refcoll': {'0': {'type': 'EAWeightedSum', 'name': 'RL2C7', 'value': 0.0, 'links': {0: 'OL3C0', 1: 'OL3C1'}, 'weights': [-0.009133010376604495, 0.8588715360168472]}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL2C7', 'value': -0.0, 'links': {0: 'PL1C0', 1: 'PL1C1', 2: 'PL1C2', 3: 'PL1C3', 4: 'PL1C4', 5: 'PL1C5', 6: 'PL1C6'}, 'weights': [0, 1, 1, 1, 1, 0, 0]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL2C7', 'value': 0.0, 'links': {0: 'RL2C7', 1: 'PL2C7'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL2C7', 'value': 0.0, 'links': {0: 'CL2C7'}, 'gain': 0.2738036067856483}}}}}}, 'level3': {'level': 3, 'nodes': {'col0': {'col': 0, 'node': {'type': 'PCTNode', 'name': 'L3C0', 'refcoll': {'0': {'type': 'EAVariable', 'name': 'RL3C0', 'value': 1.9403303867226143, 'links': {}}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL3C0', 'value': -0.0, 'links': {0: 'PL2C0', 1: 'PL2C1', 2: 'PL2C2', 3: 'PL2C3', 4: 'PL2C4', 5: 'PL2C5', 6: 'PL2C6', 7: 'PL2C7'}, 'weights': [0, 1, 0, 0, 1, 0, 0, 1]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL3C0', 'value': 0.0, 'links': {0: 'RL3C0', 1: 'PL3C0'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL3C0', 'value': -0.0, 'links': {0: 'CL3C0'}, 'gain': -0.4827240237120509}}}}, 'col1': {'col': 1, 'node': {'type': 'PCTNode', 'name': 'L3C1', 'refcoll': {'0': {'type': 'EAVariable', 'name': 'RL3C1', 'value': 0.9318355347546834, 'links': {}}}, 'percoll': {'0': {'type': 'EAWeightedSum', 'name': 'PL3C1', 'value': -0.0, 'links': {0: 'PL2C0', 1: 'PL2C1', 2: 'PL2C2', 3: 'PL2C3', 4: 'PL2C4', 5: 'PL2C5', 6: 'PL2C6', 7: 'PL2C7'}, 'weights': [0, 0, 1, 1, 0, 0, 0, 1]}}, 'comcoll': {'0': {'type': 'Subtract', 'name': 'CL3C1', 'value': 0.0, 'links': {0: 'RL3C1', 1: 'PL3C1'}}}, 'outcoll': {'0': {'type': 'EAProportional', 'name': 'OL3C1', 'value': 0.0, 'links': {0: 'CL3C1'}, 'gain': 0.5620109367921056}}}}}}}, 'post': {'post0': {'type': 'EAWeightedSum', 'name': 'Action1', 'value': 0.0, 'links': {0: 'OL0C0', 1: 'OL0C1'}, 'weights': [-1.237609939515015, 0.7061314898845801]}, 'post1': {'type': 'EAWeightedSum', 'name': 'Action2', 'value': -0.0, 'links': {0: 'OL0C0', 1: 'OL0C1'}, 'weights': [0.3034680741473669, -0.4029086430551729]}, 'post2': {'type': 'EAWeightedSum', 'name': 'Action3', 'value': -0.0, 'links': {0: 'OL0C0', 1: 'OL0C1'}, 'weights': [0.865247953057166, 0.23641862192577068]}, 'post3': {'type': 'EAWeightedSum', 'name': 'Action4', 'value': 0.0, 'links': {0: 'OL0C0', 1: 'OL0C1'}, 'weights': [0.3844442681989384, 0.9318813125539018]}, 'post4': {'type': 'EAWeightedSum', 'name': 'Action5', 'value': -0.0, 'links': {0: 'OL0C0', 1: 'OL0C1'}, 'weights': [-0.2762847680164362, -1.1365546957183819]}, 'post5': {'type': 'EAWeightedSum', 'name': 'Action6', 'value': -0.0, 'links': {0: 'OL0C0', 1: 'OL0C1'}, 'weights': [0.030109300580391185, 0.022605327020876892]}}}

        self.hpct = PCTHierarchy.from_config_with_environment(config, seed=seed)
        #self.hpct.build_links()
        self.environment = self.hpct.get_environment()
        num_links = self.environment.get_num_links()
        self.environment.check_links(num_links)  
        self.whelper = WebotsHelper(mode=mode)

    def get_controller(self):
        return self.hpct

    def get_environment_value(self):
        return self.environment.get_value()
    
    def get_actions(self):
        return self.whelper.get_actions_dict(self.environment.get_actions())

    def set_obs(self, obs):        
        self.environment.set_obs(self.whelper.get_sensor_values(obs))
        
    def step(self, verbose=False):
        return self.hpct(verbose)
        
        